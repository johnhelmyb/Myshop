{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/John/Desktop/MyShopR/Myshop/frontend/src/Page/UpdateProfile.js\";\nimport React, { Component } from 'react';\nimport HeaderBar from '../components/HeaderBar';\nimport { Link, Redirect } from 'react-router-dom';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nconst linkStyle = {\n  textDecoration: 'none',\n  color: 'white'\n};\nconst homeButton = {\n  background: 'mediumpurple',\n  padding: '1em',\n  margin: '1em'\n};\nconst cancelButton = {\n  background: 'magenta',\n  padding: '1em',\n  margin: '1em'\n};\nconst saveButton = {\n  background: 'green',\n  padding: '1em',\n  margin: '1em'\n};\nconst loginButton = {\n  background: 'royalblue',\n  padding: '1em',\n  margin: '1em'\n};\nconst loading = {\n  margin: '1em',\n  fontSize: '24px'\n};\nconst inputStyle = {\n  margin: '.5em'\n};\nconst title = {\n  pageTitle: 'Update User Profile Screen'\n};\n\nclass UpdateProfile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.updateUser = e => {\n      let accessString = localStorage.getItem('jwtToken');\n      console.log(this.state.user);\n\n      if (accessString === null) {\n        this.setState({\n          loadingUser: false,\n          error: true\n        });\n      }\n\n      e.preventDefault();\n      axios.put('http://localhost:3003/updateUser', {\n        first_name: this.state.first_name,\n        last_name: this.state.last_name,\n        email: this.state.email,\n        username: this.state.username,\n        password: this.state.password\n      }, {\n        headers: {\n          'x-access-token': accessString\n        }\n      }).then(response => {\n        console.log(response.data);\n        this.setState({\n          updated: true,\n          error: false\n        });\n      }).catch(error => {\n        console.log(error.data);\n      });\n    };\n\n    this.state = {\n      first_name: '',\n      last_name: '',\n      email: '',\n      username: '',\n      password: '',\n      loadingUser: false,\n      updated: false,\n      error: false\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      loadingUser: true\n    });\n    let accessString = localStorage.getItem('jwtToken');\n\n    if (accessString === null) {\n      this.setState({\n        loadingUser: false,\n        error: true\n      });\n    }\n\n    axios.get('http://localhost:3003/findUser', {\n      params: {\n        username: this.props.match.params.username\n      },\n      headers: {\n        'x-access-token': accessString\n      }\n    }).then(response => {\n      console.log(response.data);\n      this.setState({\n        loadingUser: false,\n        first_name: response.data.first_name,\n        last_name: response.data.last_name,\n        email: response.data.email,\n        username: response.data.username,\n        password: response.data.password,\n        error: false\n      });\n    }).catch(error => {\n      console.log(error.data);\n    });\n  }\n\n  render() {\n    const {\n      first_name,\n      last_name,\n      email,\n      username,\n      password,\n      updated,\n      error,\n      loadingUser\n    } = this.state;\n\n    if (error) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(HeaderBar, {\n          title: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: loading,\n          children: \"There was a problem accessing your data. Please go login again.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: loginButton,\n          variant: \"contained\",\n          color: \"primary\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            style: linkStyle,\n            to: \"/login\",\n            children: \"Go Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this);\n    } else if (loadingUser !== false) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(HeaderBar, {\n          title: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: loading,\n          children: \"Loading user data...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this);\n    } else if (loadingUser === false && updated === true) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: `/userProfile/${username}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 14\n      }, this);\n    } else if (loadingUser === false) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(HeaderBar, {\n          title: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"profile-form\",\n          onSubmit: this.updateUser,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            style: inputStyle,\n            id: \"first_name\",\n            label: \"first_name\",\n            value: first_name,\n            onChange: this.handleChange('first_name'),\n            placeholder: \"First Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            style: inputStyle,\n            id: \"last_name\",\n            label: \"last_name\",\n            value: last_name,\n            onChange: this.handleChange('last_name'),\n            placeholder: \"Last Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            style: inputStyle,\n            id: \"email\",\n            label: \"email\",\n            value: email,\n            onChange: this.handleChange('email'),\n            placeholder: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            style: inputStyle,\n            id: \"username\",\n            label: \"username\",\n            value: username,\n            readOnly: true,\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            style: inputStyle,\n            id: \"password\",\n            label: \"password\",\n            value: password,\n            onChange: this.handleChange('password'),\n            placeholder: \"Password\",\n            type: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            style: saveButton,\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            children: \"Save Changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: homeButton,\n          variant: \"contained\",\n          color: \"primary\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            style: linkStyle,\n            to: \"/\",\n            children: \"Go Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          style: cancelButton,\n          variant: \"contained\",\n          color: \"primary\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            style: linkStyle,\n            to: `/userProfile/${username}`,\n            children: \"Cancel Changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n}\n\nexport default UpdateProfile;","map":{"version":3,"sources":["/Users/John/Desktop/MyShopR/Myshop/frontend/src/Page/UpdateProfile.js"],"names":["React","Component","HeaderBar","Link","Redirect","TextField","Button","axios","linkStyle","textDecoration","color","homeButton","background","padding","margin","cancelButton","saveButton","loginButton","loading","fontSize","inputStyle","title","pageTitle","UpdateProfile","constructor","props","handleChange","name","event","setState","target","value","updateUser","e","accessString","localStorage","getItem","console","log","state","user","loadingUser","error","preventDefault","put","first_name","last_name","email","username","password","headers","then","response","data","updated","catch","componentDidMount","get","params","match","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport HeaderBar from '../components/HeaderBar';\nimport { Link, Redirect } from 'react-router-dom';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\n\nconst linkStyle = {\n  textDecoration: 'none',\n  color: 'white',\n};\n\nconst homeButton = {\n  background: 'mediumpurple',\n  padding: '1em',\n  margin: '1em',\n};\n\nconst cancelButton = {\n  background: 'magenta',\n  padding: '1em',\n  margin: '1em',\n};\n\nconst saveButton = {\n  background: 'green',\n  padding: '1em',\n  margin: '1em',\n};\n\nconst loginButton = {\n  background: 'royalblue',\n  padding: '1em',\n  margin: '1em',\n};\n\nconst loading = {\n  margin: '1em',\n  fontSize: '24px',\n};\n\nconst inputStyle = {\n  margin: '.5em',\n};\n\nconst title = {\n  pageTitle: 'Update User Profile Screen',\n};\n\nclass UpdateProfile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      first_name: '',\n      last_name: '',\n      email: '',\n      username: '',\n      password: '',\n      loadingUser: false,\n      updated: false,\n      error: false,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ loadingUser: true });\n\n    let accessString = localStorage.getItem('jwtToken');\n    if (accessString === null) {\n      this.setState({\n        loadingUser: false,\n        error: true,\n      });\n    }\n\n    axios\n      .get('http://localhost:3003/findUser', {\n        params: {\n          username: this.props.match.params.username,\n        },\n        headers: { 'x-access-token': accessString },\n      })\n      .then(response => {\n        console.log(response.data);\n        this.setState({\n          loadingUser: false,\n          first_name: response.data.first_name,\n          last_name: response.data.last_name,\n          email: response.data.email,\n          username: response.data.username,\n          password: response.data.password,\n          error: false,\n        });\n      })\n      .catch(error => {\n        console.log(error.data);\n      });\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  updateUser = e => {\n    let accessString = localStorage.getItem('jwtToken');\n    console.log(this.state.user);\n    if (accessString === null) {\n      this.setState({\n        loadingUser: false,\n        error: true,\n      });\n    }\n\n    e.preventDefault();\n    axios\n      .put(\n        'http://localhost:3003/updateUser',\n        {\n          first_name: this.state.first_name,\n          last_name: this.state.last_name,\n          email: this.state.email,\n          username: this.state.username,\n          password: this.state.password,\n        },\n        {\n          headers: { 'x-access-token': accessString },\n        },\n      )\n      .then(response => {\n        console.log(response.data);\n        this.setState({\n          updated: true,\n          error: false,\n        });\n      })\n      .catch(error => {\n        console.log(error.data);\n      });\n  };\n\n  render() {\n    const {\n      first_name,\n      last_name,\n      email,\n      username,\n      password,\n      updated,\n      error,\n      loadingUser,\n    } = this.state;\n\n    if (error) {\n      return (\n        <div>\n          <HeaderBar title={title} />\n          <p style={loading}>\n            There was a problem accessing your data. Please go login again.\n          </p>\n          <Button style={loginButton} variant=\"contained\" color=\"primary\">\n            <Link style={linkStyle} to=\"/login\">\n              Go Login\n            </Link>\n          </Button>\n        </div>\n      );\n    } else if (loadingUser !== false) {\n      return (\n        <div>\n          <HeaderBar title={title} />\n          <p style={loading}>Loading user data...</p>\n        </div>\n      );\n    } else if (loadingUser === false && updated === true) {\n      return <Redirect to={`/userProfile/${username}`} />;\n    } else if (loadingUser === false) {\n      return (\n        <div>\n          <HeaderBar title={title} />\n          <form className=\"profile-form\" onSubmit={this.updateUser}>\n            <TextField\n              style={inputStyle}\n              id=\"first_name\"\n              label=\"first_name\"\n              value={first_name}\n              onChange={this.handleChange('first_name')}\n              placeholder=\"First Name\"\n            />\n            <TextField\n              style={inputStyle}\n              id=\"last_name\"\n              label=\"last_name\"\n              value={last_name}\n              onChange={this.handleChange('last_name')}\n              placeholder=\"Last Name\"\n            />\n            <TextField\n              style={inputStyle}\n              id=\"email\"\n              label=\"email\"\n              value={email}\n              onChange={this.handleChange('email')}\n              placeholder=\"Email\"\n            />\n            <TextField\n              style={inputStyle}\n              id=\"username\"\n              label=\"username\"\n              value={username}\n              readOnly\n              disabled\n            />\n            <TextField\n              style={inputStyle}\n              id=\"password\"\n              label=\"password\"\n              value={password}\n              onChange={this.handleChange('password')}\n              placeholder=\"Password\"\n              type=\"password\"\n            />\n            <Button\n              style={saveButton}\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"primary\"\n            >\n              Save Changes\n            </Button>\n          </form>\n          <Button style={homeButton} variant=\"contained\" color=\"primary\">\n            <Link style={linkStyle} to=\"/\">\n              Go Home\n            </Link>\n          </Button>\n          <Button style={cancelButton} variant=\"contained\" color=\"primary\">\n            <Link style={linkStyle} to={`/userProfile/${username}`}>\n              Cancel Changes\n            </Link>\n          </Button>\n        </div>\n      );\n    }\n  }\n}\n\nexport default UpdateProfile;\n"]},"metadata":{},"sourceType":"module"}